id: generate-search-tools
name: Generate Search Tools
purpose: Extract keywords from PRD and generate search tool queries for comprehensive research. This task parses the Product Requirements Document to identify key technical terms and creates targeted search queries for various platforms and repositories.
inputs:
  prdPath:
    type: string
    description: Path to the PRD file (monolithic or sharded)
    default: docs/prd.md
  mappingsPath:
    type: string
    description: Path to tool mappings file
    default: bmad-core/data/tool-mappings.yaml
outputs:
  searchToolsFile:
    type: string
    description: Path to output search tools file
    default: search-tools.yaml
steps:
  - id: load-memory
    name: Load Memory and Initialize Context
    description: Load agent working memory and relevant long-term context
    actions:
      - description: Load agent memory context for this task
        action: Execute `loadAgentMemoryContextAndExit` from utils/agent-memory-loader.js with agentName='sm'
        elicit: false
  - id: parse-prd
    name: Parse PRD and Extract Keywords
    description: Run the keyword extraction script to generate search tools from PRD content
    actions:
      - description: Execute generate-search-tools script with provided inputs
        action: node {root}/scripts/generate-search-tools-simple.js --prd {{inputs.prdPath}} --mappings {{inputs.mappingsPath}} --output {{outputs.searchToolsFile}}
        elicit: true
  - id: validate-output
    name: Validate Generated Search Tools
    description: Ensure the generated search tools file is valid YAML and contains expected structure
    actions:
      - description: Run validation script to verify file exists and has correct structure
        action: node {root}/scripts/validate-search-tools-simple.js --file {{outputs.searchToolsFile}}
        elicit: true
  - id: save-memory
    name: Save Task Results
    description: Save task completion to memory
    actions:
      - description: Save search tools generation completion to memory
        action: Execute `saveToLongTermMemoryAndExit` from utils/agent-memory-loader.js with agentName='sm' and data='Search tools generation completed'
        elicit: false
metadata:
  agent: sm
  priority: high
  estimated_hours: 0.5
  depends_on:
    - prd.md
  tags:
    - search
    - prd
    - extraction
