id: persist-memory
name: Persist Memory Operation
purpose: Allows agents to persist observations, decisions, blockers, and key facts to their working memory
steps:
  - id: step1
    name: Validate Input
    description: Ensure required parameters are provided
    actions:
      - description: Validate agent name and memory type
        elicit: false
  
  - id: step2
    name: Persist Memory
    description: Execute the appropriate persist function based on memory type
    actions:
      - description: Call persist-memory-cli.js with appropriate parameters
        elicit: false
        command: |
          node {{utils}}/persist-memory-cli.js {{memoryType}} {{agentName}} {{content}} {{rationale}}

inputs:
  agentName:
    type: string
    required: true
    description: The agent name (dev, qa, sm, etc.)
  memoryType:
    type: string
    required: true
    description: Type of memory to persist (observation, decision, blocker, keyfact)
    enum: ["observation", "decision", "blocker", "keyfact"]
  content:
    type: string
    required: true
    description: The main content to persist
  rationale:
    type: string
    required: false
    description: Additional rationale (required for decisions)
outputs:
  success:
    type: boolean
    description: Whether the memory was successfully persisted
metadata:
  canBeUsedBy: ["dev", "qa", "sm", "analyst", "architect", "pm", "po"]
  requiresConfiguration: ["memory"]
  category: memory
  complexity: low
  version: "1.0"
  tags:
    - memory
    - persistence
    - working-memory
notes: |
  This task provides a simple interface for agents to persist memory.
  
  Usage examples:
  - Persist observation: memoryType=observation, content="Found bug in authentication"
  - Persist decision: memoryType=decision, content="Use JWT tokens", rationale="Industry standard and secure"
  - Persist blocker: memoryType=blocker, content="Missing API documentation"
  - Persist key fact: memoryType=keyfact, content="Database uses PostgreSQL 14"